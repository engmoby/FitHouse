<!--TOP SECTION-->
<div class="inn-body-section pad-bot-55">
    <div class="container">
        <div class="row">
            <div class="page-head">
                <h4>{{'CustomizeProgram' | translate}} </h4>
                <div class="head-title">
                    <div class="hl-1"></div>
                    <div class="hl-2"></div>
                    <div class="hl-3"></div>
                </div>
            </div>
            <!--TYPOGRAPHY SECTION-->

            <form name="stepTwoProgramForm">
                <div class="head-typo typo-com collap-expand">
                    <h4> {{'ProgramDays' | translate}}</h4>
                    <!-- {{CustomCtrl.itemList}} -->
                    <span>{{'carbs' | translate}}: {{CustomCtrl.carbs}}</span>
                    <span>{{'fat' | translate}}: {{CustomCtrl.fat}}</span>
                    <span>{{'calories' | translate}}: {{CustomCtrl.calories}}</span>
                    <span>{{'protein' | translate}}: {{CustomCtrl.protein}}</span>
                    <div ng-init="counterDay = 0; counterMeal = 0">
                        <div class="panel-group pmd-accordion pmd-accordion-inbox" id="accordion6" role="tablist"
                            aria-multiselectable="true">
                            <div ng-repeat="n in [].constructor(CustomCtrl.daysCount)  track by $index"
                                class="panel panel-default">
                                <div class="panel-heading" role="tab" id="headingOne">
                                    <a ng-init="counterDay=counterDay+1;" data-toggle="collapse"
                                        data-parent="#accordion6" ng-init="n=false"
                                        ng-click="n=!n;showDetails = ! showDetails; CustomCtrl.showDDL(); "
                                        aria-expanded="true" aria-controls="collapseOne6" data-expandable="false">
                                        <h4 class="panel-title">

                                            {{'Day' | translate}} : {{counterDay=$index+1}}
                                            <!-- <i class="material-icons md-dark pmd-sm pmd-accordion-arrow">keyboard_arrow_down</i> -->

                                        </h4>
                                    </a>
                                </div>

                                <div ng-show="n == true" id="collapseOne6" class="panel-collapse collapse in"
                                    role="tabpanel" aria-labelledby="headingOne">
                                    <div class="panel-body">
                                        <ul>
                                            <li
                                                ng-repeat="meal in [].constructor(CustomCtrl.mealsCount)  track by $index">
                                                <!--EVENT-->
                                                <div class="row events">
                                                    <div class="col-md-2"> <img src="/assets/img/meal.jpeg" alt="" />
                                                    </div>
                                                    <div class="col-md-8">
                                                        <h3>
                                                            <a ng-init="counterMeal=counterMeal+1;">{{'Meal' | translate}}
                                                                : {{counterMeal=$index+1}}
                                                            </a>
                                                        </h3>


                                                        <div class="progress-bar progress-bar-danger progress-bar-striped"
                                                            role="progressbar" aria-valuenow="70" aria-valuemin="0"
                                                            aria-valuemax="100" style="width:'{{CustomCtrl.carbs}}%'">
                                                            60 (Calories) </div>
                                                    </div>


                                                    <br />
                                                    <!--SERVICES SECTION-->
                                                    <!--END SERVICES SECTION-->
                                                </div>
                                                <!--END EVENT-->

                                                <div ng-show="showDetails">
                                                    <div
                                                        class="form-group pmd-textfield pmd-textfield-floating-label pmd-textfield-floating-label-completed">
                                                        <label for="first-name">{{'SelectItems' | translate}}</label>
                                                        <select required name="ddl{{counterDay}}{{counterMeal}}"
                                                            style="width:100% !important"
                                                            class="select-tags form-control pmd-select2-tags" multiple
                                                            ng-model="itemModel"
                                                            ng-change="getData(itemModel,counterDay,counterMeal);CustomCtrl.addItemToList(itemModel)"
                                                            ng-options="item as item.itemNameDictionary[selectedLanguage] 
                                                                        group by item.category.titleDictionary[selectedLanguage]
                                                                        for item  in CustomCtrl.ItemCategorized">
                                                        </select>
                                                        <div
                                                            ng-messages="stepTwoProgramForm.ddl{{counterDay}}{{counterMeal}}.$error">
                                                            <div
                                                                ng-show="stepTwoProgramForm.ddl{{counterDay}}{{counterMeal}}.$error.required && !stepTwoProgramForm.ddl{{counterDay}}{{counterMeal}}.$pristine">
                                                                {{'requiredErr' | translate}}</div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="res-menu" ng-repeat="meal in itemModel">
                                                            <img src={{meal.imageUrl}} imageonload alt="">
                                                            <!-- <img src="/assets/img/meal.jpeg" alt="" /> -->
                                                            <h3> {{meal.itemNameDictionary[selectedLanguage] }}
                                                                <span>{{meal.totalPrice}} SR</span>
                                                            </h3>
                                                            <span
                                                                class="menu-item">{{meal.itemDescriptionDictionary[selectedLanguage] | limitTo:20}}</span>
                                                            <span> {{'fat' | translate}}:{{meal.fat}}</span>
                                                            <span> {{'carbs' | translate}}:{{meal.carbs}}</span>
                                                            <span> {{'protein' | translate}}:{{meal.protein}}</span>
                                                            <span> {{'calories' | translate}}:{{meal.calories}}</span>
                                                        </div>
                                                    </div>

                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- <div ng-show="!stepTwoProgramForm.$invalid" class="head-typo typo-com collap-expand"> -->
                <div class="head-typo typo-com collap-expand">
                    <h4>{{'addressLbl' | translate}}</h4>
                    <div class="col-md-12">
                        <div class="head-typo typo-com collap-expand book-form inn-com-form">
                            <!-- Switch -->
                            <!-- <div class="switch">
                                <label> {{'Delivery' | translate}}
                                    <input type="checkbox" ng-model="CustomCtrl.orderType.type"
                                        ng-click="CustomCtrl.changeOrderType()">
                                    <span class="lever"></span>
                                    {{'PickUp' | translate}} </label>
                            </div> -->
                            <div class="col-md-12">
                                <h5>{{'OrderType' | translate}}</h5>
                                <p>
                                    <input ng-model="CustomCtrl.orderType.type" ng-change="CustomCtrl.typeChanged()" name="group1" type="radio" id="test1"
                                        value="delivery" />
                                    <label for="test1">{{'Delivery' | translate}}</label>
                                </p>
                                <p>
                                    <input ng-model="CustomCtrl.orderType.type" ng-change="CustomCtrl.typeChanged()"name="group1" type="radio" id="test2"
                                        value="pickup" />
                                    <label for="test2">{{'Pickup' | translate}}</label>
                                </p>

                                <!--    <div ng-if="CustomCtrl.orderType.type == 'delivery'" class="row form-group">
                                    <div class="col-md-6">
                                        <div>
                                            <div
                                                class="form-group pmd-textfield pmd-textfield-floating-label pmd-textfield-floating-label-completed">
                                                <label for="first-name">{{'SelectAddress' | translate}}</label>
                                             
                                                <div ng-repeat="address in userAddresses">


                                                    <input ng-change="addressInfo(address)" name="group2" type="radio"
                                                        id="test{{address.addressId}}" ng-model="addresses.address"
                                                        value="{{address.addressId}}" />
                                                    <label for="test{{address.addressId}}">{{address.appartmentNo}},
                                                        {{address.description}},
                                                        {{'Floor' | translate}} {{address.floor}}</label>
 
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                 <p>
                                <input name="group1" ng-click="CustomCtrl.changeOrderType()"
                                    ng-model="CustomCtrl.orderType.type" type="radio" id="test1" />
                                <label for="test1">{{'Delivery' | translate}}</label>
                            </p>
                            <p>
                                <input name="group1" ng-click="CustomCtrl.changeOrderType()"
                                    ng-model="CustomCtrl.orderType.type" type="radio" id="test2" />
                                <label for="test2">{{'PickUp' | translate}}</label>
                            </p> -->
                                <div class="row form-group" ng-if="CustomCtrl.orderType.type == 'delivery'">
                                    <div class="col-md-6">
                                        <div>
                                            <div
                                                class="form-group pmd-textfield pmd-textfield-floating-label pmd-textfield-floating-label-completed">
                                                <label for="first-name">{{'SelectAddress' | translate}}</label>

                                                <div ng-repeat="address in CustomCtrl.userAddresses">
                                                    <p>

                                                        <p>
                                                            <input ng-change="CustomCtrl.addressInfo(address)"
                                                                name="group2" type="radio"
                                                                id="address{{address.addressId}}"
                                                                ng-model="addresses.address"
                                                                value="{{address.addressId}}" />
                                                            <label for="address{{address.addressId}}">
                                                                {{'appartmentNo' | translate}}: {{address.appartmentNo}}
                                                                <br> {{'FLoor' | translate}} : {{address.floor}}
                                                                <br> {{'description' | translate}}
                                                                :{{address.description}}</label>
                                                        </p>

                                                        <!-- <input ng-change="CustomCtrl.addressInfo(address)" name="group2"
                                                            type="radio" ng-model="CustomCtrl.addresses.address"
                                                            id="address{{address.addressId}}"
                                                            value="{{address.addressId}}"
                                                            ng-required="CustomCtrl.orderType.type == 'delivery'">
                                                        <label for="addressRadio{{address.addressId}}">
                                                            {{'appartmentNo' | translate}}: {{address.appartmentNo}}
                                                            <br> {{'FLoor' | translate}} : {{address.floor}}
                                                            <br> {{'appartmentNo' | translate}} :
                                                            {{address.description}}
                                                        </label> -->
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div ng-show="CustomCtrl.orderType.type == 'pickup'">
                                    <div class="row">
                                        <div class="input-field col s6">
                                            <select style="width:100% !important"
                                                ng-required="CustomCtrl.orderType.type == 'pickup'"
                                                class=" select-tags form-control pmd-select2-tags" name="country"
                                                ng-change="CustomCtrl.countryChange()"
                                                ng-model="CustomCtrl.selectedCountryId"
                                                ng-options="group.countryId as group.titleDictionary[selectedLanguage] for group in CustomCtrl.counties">
                                            </select>
                                            <span ng-show='stepTwoProgramForm.country.$error.required'>
                                                required
                                            </span>
                                        </div>
                                        <div class="input-field col s6">
                                            <select style="width:100% !important"
                                                ng-required="CustomCtrl.orderType.type == 'pickup' || CustomCtrl.selectedCountryId > 0"
                                                class="select-tags form-control pmd-select2-tags"
                                                ng-change="CustomCtrl.regionChange()"
                                                ng-model="CustomCtrl.selectedRegionId"
                                                ng-options="group.regionId as group.titleDictionary[selectedLanguage] for group in CustomCtrl.regions">
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="input-field col s6">
                                            <select
                                                ng-required="CustomCtrl.orderType.type == 'pickup'  || CustomCtrl.selectedRegionId > 0"
                                                style="width:100% !important"
                                                class="select-tags form-control pmd-select2-tags"
                                                ng-change="CustomCtrl.cityChange()" ng-model="CustomCtrl.selectedCityId"
                                                ng-options="group.cityId as group.titleDictionary[selectedLanguage] for group in CustomCtrl.cities">
                                            </select>
                                        </div>
                                        <div class="input-field col s6">
                                            <select
                                                ng-required="CustomCtrl.orderType.type == 'pickup' || CustomCtrl.selectedCityId > 0"
                                                style="width:100% !important"
                                                class="select-tags form-control pmd-select2-tags"
                                                ng-change="CustomCtrl.areaChange()" ng-model="CustomCtrl.selectedAreaId"
                                                ng-options="group.areaId as group.titleDictionary[selectedLanguage] for group in CustomCtrl.area">
                                            </select>
                                        </div>
                                        <div class="input-field col s6">
                                            <select
                                                ng-required="CustomCtrl.orderType.type == 'pickup' || CustomCtrl.selectedAreaId > 0"
                                                style="width:100% !important"
                                                class="select-tags form-control pmd-select2-tags"
                                                ng-change="CustomCtrl.branchChange()"
                                                ng-model="CustomCtrl.selectedBranchId"
                                                ng-options="group.branchId as group.titleDictionary[selectedLanguage] for group in CustomCtrl.branchList">
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-10"></div>
                    <div class="col-md-4">
                        {{'price' | translate}}:{{ CustomCtrl.ProgramTotalPrice}} SR
                        <br> {{'DeliveryPrice' | translate}}:{{ CustomCtrl.DeliveryFees}} SR
                        <br>{{'Total' | translate}} :{{ CustomCtrl.Total}} SR
                        <br>
                        <button style="background-color: #e4e5e6;color: black!important;"
                            ng-disabled="stepTwoProgramForm.$invalid || CustomCtrl.selectedBranchId <= 0"
                            class="btn pmd-ripple-effect btn-primary" type="button"
                            ng-click="CustomCtrl.AddNewProgram();">
                            {{'Order' | translate}}</button>
                    </div>
                </div>
            </form>


            <!--END TYPOGRAPHY SECTION-->
        </div>
    </div>

</div>
<!--TOP SECTION-->